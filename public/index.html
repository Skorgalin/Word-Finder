<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Word Finder Game</title>
<style>
body { font-family: Arial; padding:20px; }
input, button { font-size:16px; margin:5px; outline:none; }
#foundWindow, #adminPanel { display:none; border:1px solid #000; padding:10px; margin-top:10px; max-height:300px; overflow-y:auto; }

.ultraBox{
  position:fixed;
  top:20%;
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:20px;
  border:3px solid gold;
  animation:glow 1.5s infinite alternate;
  z-index:999;
  text-align:center;
}

@keyframes glow{
  from{box-shadow:0 0 10px gold;}
  to{box-shadow:0 0 30px gold;}
}

.announcement{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:8px 12px;
  margin-top:5px;
  border:1px solid #000;
  opacity:1;
  transition: opacity 1s;
  z-index:1000;
}
</style>
</head>
<body>

<h2>Word Finder Game</h2>

<div id="loginDiv">
  <input type="email" id="email" placeholder="E-Mail">
  <input type="password" id="password" placeholder="Admin Passwort (falls Admin)">
  <button onclick="login()">Login</button>
</div>

<div id="gameDiv" style="display:none;">
  <input type="text" id="inputField" placeholder="Tippe etwas...">
  <button onclick="submitInput()">Enter</button>
  <button onclick="toggleFound()">Found Items</button>
  <button id="adminBtn" style="display:none;" onclick="showAdminPanel()">Admin</button>
  <div id="foundWindow"></div>
  <div id="adminPanel"></div>
</div>

<div id="announcementContainer"></div>

<script>
const ADMIN_MAIL = "till.behner@icloud.com";
const ADMIN_PASSWORD = "X9$QvR7!eM2#A8wK@C";
const ultraRare = ["ðŸŒŸ","ðŸ’Ž","âœ¨"];

let email = "";
let found = {};
let items = {}; 
let adminLogged=false;
let announcements = [];

function login(){
  email = document.getElementById("email").value;
  const pass = document.getElementById("password").value;
  if(!email){ alert("E-Mail eingeben!"); return; }

  document.getElementById("loginDiv").style.display="none";
  document.getElementById("gameDiv").style.display="block";

  if(email===ADMIN_MAIL && pass===ADMIN_PASSWORD){
    document.getElementById("adminBtn").style.display="inline-block";
    adminLogged=true;
  }
}

function submitInput(){
  const val = document.getElementById("inputField").value.trim();
  if(!val) return;
  document.getElementById("inputField").value="";

  if(!items[val]){
    let result, ultra=false;
    if(Math.random()<0.02){ 
      result = ultraRare[Math.floor(Math.random()*ultraRare.length)];
      ultra=true;
    } else {
      const emojis=["ðŸ˜€","ðŸ˜‚","ðŸ˜Ž","ðŸ¥³","ðŸ”¥","ðŸ’€"];
      result = Math.random()<0.5 ? generateWord() : emojis[Math.floor(Math.random()*emojis.length)];
    }
    items[val]={result, ultra};
  }

  if(!found[val]) found[val]=items[val];
  renderFound();
  if(items[val].ultra) showUltraAnimation(items[val].result);
}

function generateWord(){
  const letters="abcdefghijklmnopqrstuvwxyz";
  let w="";
  for(let i=0;i<3+Math.floor(Math.random()*5);i++){
    w+=letters[Math.floor(Math.random()*letters.length)];
  }
  return w;
}

function renderFound(){
  let html="<h3>Found Items:</h3>";
  for(let k in found){
    let cat = getCategory(found[k], k);
    html += `<b>${k}</b> -> ${found[k].result} [${cat}] ` +
      (found[k].ultra ? "" : "<span style='color:red'>First Discovery</span>") +
      "<br>";
  }
  document.getElementById("foundWindow").innerHTML=html;
}

function getCategory(itemObj, key){
  if(itemObj.ultra) return "ðŸŒŸ Ultraselten";
  if(key.length===1 && key.match(/\p{Emoji}/u)) return "ðŸ˜€ Emoji";
  if(/^[a-zA-Z]+$/.test(key)) return "ðŸ”¤ Buchstabenfolge";
  return "ðŸ“– WÃ¶rter";
}

function toggleFound(){
  const fw=document.getElementById("foundWindow");
  fw.style.display=fw.style.display==="none"?"block":"none";
}

function showUltraAnimation(item){
  const box=document.createElement("div");
  box.className="ultraBox";
  box.innerHTML="<b>ðŸŒŸ ULTRASELTEN ðŸŒŸ</b><br><div style='font-size:40px'>"+item+"</div>";
  document.body.appendChild(box);
  setTimeout(()=>box.remove(),3500);
}

function showAdminPanel(){
  if(!adminLogged) return;
  const panel=document.getElementById("adminPanel");
  let html="<h3>Admin Dashboard</h3>";
  html += `<input type="text" id="adminSearchInput" placeholder="Item suchen">
           <button onclick="adminSearch()">Suchen</button><br>`;
  html += `<input type="text" id="announcementInput" placeholder="Neue AnkÃ¼ndigung">
           <button onclick="postAnnouncement()">Senden</button><br>`;
  html += `<h4>Alle Items</h4>`;
  html += `<div id="allItems"></div>`;
  panel.innerHTML=html;
  panel.style.display="block";
  renderAdminItems();
}

function renderAdminItems(){
  const ai=document.getElementById("allItems");
  let html="";
  for(let k in items){
    const cat=getCategory(items[k], k);
    html += `<b>${k}</b> -> ${items[k].result} [${cat}] ` +
      (items[k].ultra?"": "<button onclick='adminEdit(\""+k+"\")'>Ã„ndern</button>") +
      "<br>";
  }
  ai.innerHTML=html;
}

function adminSearch(){
  const key=document.getElementById("adminSearchInput").value.trim();
  if(!key) return;

  if(!items[key]){
    let result, ultra=false;
    if(Math.random()<0.02){
      result = ultraRare[Math.floor(Math.random()*ultraRare.length)];
      ultra=true;
    } else {
      const emojis=["ðŸ˜€","ðŸ˜‚","ðŸ˜Ž","ðŸ¥³","ðŸ”¥","ðŸ’€"];
      result = Math.random()<0.5 ? generateWord() : emojis[Math.floor(Math.random()*emojis.length)];
    }
    items[key]={result, ultra};
  }

  alert(`Item: ${key}\nErgebnis: ${items[key].result}\nKategorie: ${getCategory(items[key], key)}\n` +
    (items[key].ultra?"Ultraselten Items kÃ¶nnen nicht geÃ¤ndert werden":"Kann geÃ¤ndert werden"));
  renderAdminItems();
}

function adminEdit(key){
  if(items[key].ultra) return;
  const newVal=prompt("Neues Ergebnis fÃ¼r "+key+" eingeben:", items[key].result);
  if(!newVal) return;
  items[key].result=newVal;
  renderAdminItems();
}

function postAnnouncement(){
  const text=document.getElementById("announcementInput").value.trim();
  if(!text) return;
  document.getElementById("announcementInput").value="";
  announcements.unshift(text);
  if(announcements.length>5) announcements.pop();
  renderAnnouncements();
}

function renderAnnouncements(){
  const container=document.getElementById("announcementContainer");
  container.innerHTML="";
  announcements.forEach((msg,i)=>{
    const div=document.createElement("div");
    div.className="announcement";
    div.style.top = (10 + i*40) + "px";
    div.innerText=msg;
    container.appendChild(div);
    setTimeout(()=>{ div.style.opacity=0; setTimeout(()=>div.remove(),1000); }, 5000+i*1000);
  });
}
</script>

</body>
</html>
